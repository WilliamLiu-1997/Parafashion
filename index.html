<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Parafashion</title>
    <link rel="shortcut icon" href="#" />
    <link
      rel="stylesheet"
      href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css"
    />
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
  </head>

  <style>
    ::-webkit-scrollbar {
      width: 2px;
      height: 5px;
      background-color: #f5f5f5;
    }

    ::-webkit-scrollbar-track {
      -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);
      border-radius: 10px;
      background-color: #555;
    }

    ::-webkit-scrollbar-thumb {
      border-radius: 10px;
      -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);
      background-color: #f5f5f5;
    }

    body {
      background-color: #000;
      color: #fff;
      margin: 0px;
      overflow: hidden;
      scrollbar-width: none;
      cursor: auto;
    }

    #info {
      position: absolute;
      font-size: 16px;
      font-weight: 100;
      font-family: Lato, sans-serif;
      left: 50%;
      top: 10px;
      text-align: center;
      user-select: none;
      z-index: 100;
      text-transform: uppercase;
      transform: translate(-50%, 0);
    }

    #transform {
      display: none;
      position: absolute;
      background-color: rgba(0, 0, 0, 0);
      left: 50%;
      top: 40px;
      z-index: 9;
      transform: translate(-50%, 0);
    }

    #vertice_num {
      position: absolute;
      font-size: 10px;
      font-weight: 100;
      color: #a0a0a0;
      text-align: center;
      left: 50%;
      bottom: 0px;
      font-family: Lato, sans-serif;
      text-align: center;
      user-select: none;
      text-transform: uppercase;
      transform: translate(-50%, 0);
    }

    canvas {
      width: 100%;
      height: 100%;
    }

    div.panel_box {
      position: absolute;
      top: 10%;
      width: 22%;
      min-width: 240px;
      z-index: 10;
      text-align: center;
      cursor: auto;
    }

    .btn:active.focus,
    .btn:active:focus,
    .btn:focus {
      outline: 0px auto -webkit-focus-ring-color;
      outline-offset: 2px;
    }

    .btn-group > .btn:first-child:not(:last-child):not(.dropdown-toggle) {
      border-top-left-radius: 0;
      border-top-right-radius: 0;
      border-bottom-right-radius: 0;
      border-bottom-left-radius: 0;
    }
    .btn-group > .btn:last-child:not(:first-child),
    .btn-group > .dropdown-toggle:not(:first-child) {
      border-top-left-radius: 0;
      border-bottom-left-radius: 0;
      border-bottom-right-radius: 0;
    }

    #gui_container {
      /* background-color:rgba(228, 228, 228, 0.096); */
      position: absolute;
      max-height: 91%;
      top: 5%;
      right: 0px;
      z-index: 3;
      user-select: none;
      overflow: hidden;
    }

    .alert_container {
      position: absolute;
      top: 36px;
      left: 50%;
      transform: translate(-50%, 0);
      z-index: 10;
    }

    .loading {
      display: none;
      position: absolute;
      top: 48%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 99;
      color: white;
      font-size: 40px;
      font-weight: 100;
      font-family: Lato, sans-serif;
      letter-spacing: 10px;
      text-transform: uppercase;
      cursor: wait;
    }
    .loading span {
      animation: shrink 2s infinite;
    }

    @keyframes shrink {
      50% {
        transform: scale(0.2);
      }
    }

    .processing {
      display: none;
      position: absolute;
      top: 48%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 99;
      color: white;
      font-size: 40px;
      font-weight: 100;
      font-family: Lato, sans-serif;
      letter-spacing: 10px;
      text-transform: uppercase;
      cursor: wait;
    }
    .processing span {
      animation: shrink1 5s infinite;
    }

    @keyframes shrink1 {
      3.33% {
        transform: rotate(-25deg);
      }
      6.66% {
        transform: rotate(15deg);
      }
      10% {
        transform: rotate(0deg)
      }
    }

    .tip {
      font-size: 12px;
      font-weight: bold;
      text-align: center;
      color: rgb(228, 228, 228);
    }

    #small_info{
      position: absolute;
      font-family: Lato, sans-serif;
      width: 100%;
      font-size: 1px;
      text-align: center;
      top: calc(48% + 40px);
      color: rgba(255, 255, 255, 0.5);
    }

    .up-area {
      border: 1px dashed rgb(150, 150, 150);
      width: 300px;
      min-height: 50px;
      line-height: 50px;
      background-color: rgba(90, 90, 90, 0);
    }

    img {
      max-width: 100%;
      display: inline-block;
    }

    .texture_container {
      max-height: 45%;
      overflow-y: auto;
      overflow-x: hidden;
    }

    #gui_container_gui {
      max-height: 55%;
      overflow-y: auto;
      overflow-x: hidden;
    }

    #loading_background {
      position: absolute;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 98;
      height: 100%;
      width: 100%;
      cursor: wait;
    }
  </style>

  <body>
    <div id="loading_background">
      <div id="small_info">This may take around 2 minutes to process the model</div></div>
    <div id="loading" class="loading">
      <span style="animation-delay: 0s">L</span
      ><span style="animation-delay: 0.1s">o</span
      ><span style="animation-delay: 0.2s">a</span
      ><span style="animation-delay: 0.3s">d</span
      ><span style="animation-delay: 0.4s">i</span
      ><span style="animation-delay: 0.5s">n</span
      ><span style="animation-delay: 0.6s">g</span>
    </div>
    <div id="processing" class="processing">
      <span style="animation-delay: 0s">P</span>
      <span style="animation-delay: 0.5s">R</span>
      <span style="animation-delay: 1s">O</span>
      <span style="animation-delay: 1.5s">C</span>
      <span style="animation-delay: 2s">E</span>
      <span style="animation-delay: 2.5s">S</span>
      <span style="animation-delay: 3s">S</span>
      <span style="animation-delay: 3.5s">I</span>
      <span style="animation-delay: 4s">N</span>
      <span style="animation-delay: 4.5s">G</span>
    </div>
    <div id="container"></div>
    <div id="gui_container">
      <button
        type="button"
        class="btn-default"
        data-toggle="collapse"
        data-target="#texture_container"
        style="
          background-color: rgb(60, 60, 60);
          border: 1px solid rgb(90, 90, 90);
          border-style: solid none solid none;
          font-size: 12px;
          color: #fff;
          padding: 3px;
          width: 100%;
        "
      >
        Custom Texture
      </button>
      <div
        id="texture_container"
        class="texture_container panel-collapse collapse in"
      >
        <div class="dragFile">
          <div class="up-area">
            <div class="tip">Click or Drag to upload a texture...</div>
            <input
              type="file"
              style="display: none"
              id="fileDrag"
              name="fileDragselect"
              multiple
            />
            <div class="list-drag" style="text-align: center"></div>
          </div>
        </div>
      </div>
      <button
        type="button"
        class="btn-default"
        data-toggle="collapse"
        data-target="#gui_container_gui"
        style="
          background-color: rgb(60, 60, 60);
          border: 1px solid rgb(90, 90, 90);
          border-style: none none solid none;
          font-size: 12px;
          color: #fff;
          padding: 3px;
          width: 100%;
        "
      >
        Controls
      </button>
      <div id="gui_container_gui" class="panel-collapse collapse in"></div>
    </div>
    <div id="alert_uv" class="alert_container"></div>
    <div id="alert_size" class="alert_container"></div>
    <div id="alert_img" class="alert_container"></div>
    <div id="alert_cut" class="alert_container"></div>
    <div id="alert_line" class="alert_container"></div>
    <div id="alert_transmission" class="alert_container"></div>
    <div id="panel_box" class="panel_box">
      <div id="patch_btn" class="btn-group" style="width: 100%">
        <button
          id="hide-patches"
          type="button"
          class="btn"
          style="
            background-color: rgb(60, 60, 60);
            border: 1px solid rgb(90, 90, 90);
            font-size: 12px;
            color: #fff;
            padding: 2px;
            width: 90%;
          "
          onclick="hidePatches()"
        >
          Hide Patches
        </button>
        <button
          id="scale-patches"
          type="button"
          class="btn"
          style="
            background-color: rgb(60, 60, 60);
            border: 1px solid rgb(90, 90, 90);
            font-size: 12px;
            color: #fff;
            padding: 2px;
            width: 10%;
          "
          onclick="scalePatches()"
        >
          >
        </button>
      </div>
      <div
        id="panel-patches"
        class="collapse in"
        style="background-color: rgba(0, 0, 0, 0.75)"
      >
        <div id="container_patch"></div>
      </div>
    </div>
    <div id="info">
      <p>Parafashion</p>
    </div>
    <div id="transform"></div>
    <div id="vertice_num"></div>
    <script>
      show_loading();

      function show_loading() {
        $("#loading").show();
        $("#processing").hide();
        $("#loading").css({ display: "flex", opacity: 0 });
        $("#loading").animate({ opacity: 1 }, 500);
        $("#loading_background").show();
      }
      function show_processing() {
        $("#loading").hide();
        $("#processing").show();
        $("#processing").css({ display: "flex", opacity: 0 });
        $("#processing").animate({ opacity: 1 }, 500);
        $("#loading_background").show();
      }
      function hide_loading() {
        $("#loading").fadeOut(800);
        $("#processing").fadeOut(800);
        $("#loading_background").fadeOut(800);
      }

      var render_patch_flag = true;
      var patch_scaled = false;
      var resize_patch = false;
      function hidePatches() {
        if (resize_patch) return;
        resize_patch = true;
        if ($("#hide-patches").text() == "Show Patches") {
          $("#panel-patches").collapse("show");
          $("#hide-patches").text("Hide Patches");
          $("#scale-patches").css({ color: "#fff" });
          $(".panel_box").animate(
            { width: "22%", minWidth: "240px" },
            350,
            function () {
              setTimeout(function () {
                resize_patch = false;
              }, 100);
            }
          );
          $("#scale-patches").text(">");
          render_patch_flag = true;
          patch_scaled = false;
        } else {
          $("#panel-patches").collapse("hide");
          $("#hide-patches").text("Show Patches");
          $("#scale-patches").css({ color: "#aaa" });
          $(".panel_box").animate(
            { width: "5%", minWidth: "120px" },
            350,
            function () {
              setTimeout(function () {
                resize_patch = false;
              }, 100);
            }
          );
          $("#scale-patches").text(">");
          render_patch_flag = false;
          patch_scaled = false;
        }
      }
      function scalePatches() {
        resize_patch = true;
        if (
          $("#hide-patches").text() != "Show Patches" &&
          $("#scale-patches").text() != "<"
        ) {
          $(".panel_box").animate(
            {
              width: Math.max(
                window.innerWidth * 0.2,
                window.innerWidth - 2 - $("#gui_container").width()
              ),
            },
            350,
            function () {
              setTimeout(function () {
                resize_patch = false;
              }, 100);
              patch_scaled = true;
            }
          );
          $("#scale-patches").text("<");
        } else if (
          $("#hide-patches").text() != "Show Patches" &&
          $("#scale-patches").text() == "<"
        ) {
          $(".panel_box").animate({ width: "22%" }, 350, function () {
            setTimeout(function () {
              resize_patch = false;
            }, 100);
          });
          $("#scale-patches").text(">");
          patch_scaled = false;
        }
      }
    </script>
    <script type="text/javascript" src="js/DerivePatchLayout.js"></script>
    <script type="module" src="scenes.js"></script>
  </body>
</html>
